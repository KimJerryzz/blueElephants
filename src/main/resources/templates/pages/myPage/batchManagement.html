<!DOCTYPE html>
<html lang="ko" xml:lang="ko" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <th:block th:include="fragments/header"></th:block>
    <script>
        $(function() {
            $(document).ready(function() {
                $("#batchRegister").click(function() {
                    $("#batch_modal").css({
                        "display": "block"
                    });
                });
                $(".modal_cancel").click(function() {
                    $("#batch_modal").css({
                        "display": "none"
                    });
                });
                $("html").click(function(event) {
                    if (event.target.id === "batch_modal") {
                        $("#batch_modal").css({
                            "display": "none"
                        });
                    }
                });
            });
        })
    </script>
    <style>
        .layer_popup .popup_area1{position:absolute;top:0;right:0;bottom:0;left:0;width:827px;max-height:calc(90% - 90px);margin:auto;border-radius:30px;background-color:#fff;box-sizing:border-box}
    </style>
</head>
<body oncontextmenu='return false' onselectstart='return false' ondragstart='return false'>
<div id="wrap">
    <th:block th:include="fragments/header_gnb"></th:block>
    <div id="container">
        <th:block th:include="fragments/snb"></th:block>
        <div class="contents">
            <div class="page_top">
                <h3 class="page_tit">일괄가입</h3>
                <span>선생님께서 등록하신 기본 데이터로 학생 계정을 생성합니다.</span>
            </div>
            <div class="page_cont join_form_area">
            <form action="/fssd" method="post" th:object="${teacher}">
                <div class="sec_write">
                    <input type="hidden" id="authBothChk" value="0"/>
                    <div class="tbl_write">
                        <div class="sec_write">
                            <div class="tbl_write contour">
                                <ul>
                                    <li>
                                        <div class="th">지역명</div>
                                        <div class="td">
                                            <input type="text" id="areaNm" name="areaNm" th:value="*{areaNm}" readonly>
                                        </div>
                                    </li>
                                    <li>
                                        <div class="th">학교명</div>
                                        <div class="td">
                                            <input type="text" id="schlNm" name="schlNm" th:value="*{schlNm}" readonly>
                                        </div>
                                    </li>
                                    <li>
                                        <div class="th">학년</div>
                                        <div class="td">
                                            <input type="text" id="grade" name="grade" th:value="*{grade}" readonly>
                                        </div>
                                    </li>
                                    <li>
                                        <div class="th">반</div>
                                        <div class="td">
                                            <input type="text" id="ban" name="ban" th:value="*{ban}" readonly>
                                        </div>
                                    </li>
                                    <li>
                                        <div class="th">가입할 계정 개수<span class="aster">*</span></div>
                                        <div class="td">
                                            <input type="number" id="batchArr" name="batchArr" placeholder="생성할 계정의 개수를 입력해주세요.">
                                        </div>
                                    </li>
                                    <li>
                                        <div class="th">
                                            <label for="loginId">계정 양식</label>
                                            <span class="aster">*</span>
                                        </div>
                                        <div class="td">
                                            <input type="text" id="loginId" name="loginId" placeholder="생성할 계정의 양식을 입력해주세요.">
                                        </div>
                                    </li>
                                    <li>
                                        <div class="th">초기 패스워드<span class="aster">*</span></div>
                                        <div class="td">
                                            <input type="text" id="pwd" name="pwd" placeholder="초기 패스워드를 입력해주세요.">
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
            </div>
            <div class="btn_area">
                <button id="batch_confirm" class="btn btn_lg btn_blue btn_pill_10">승인</button>
            </div>
        </div>
        <div class="batch_contents">
            <div class="page_cont">
                <div class="sec_write_area clearfix">
                    <div class="sec_write info">
                        <h4 class="year">&nbsp;2021&nbsp;2020&nbsp;2019&nbsp;</h4>
                        <ul class="board_tbl_list type02">
                            <li class="thead">
                                <strong class="id">ID</strong>
                                <strong class="name">이름</strong>
                                <strong class="no">번호</strong>
                                <strong class="process">진도</strong>
                                <strong class="test">사전검사</strong>
                                <strong class="test">사후검사</strong>
                            </li>
                                <li>
                                    <div class="id">puco0001</div>
                                    <div class="name"><a href="javascript:;" class="link fc_blue">유학생</a></div>
                                    <div class="no">6</div>
                                    <div class="state"><span class="th"></span>1차시</div>
                                    <div class="test"><span class="th"></span>완료</div>
                                    <div class="test"><span class="th"></span>완료</div>
                                </li>
                                <li>
                                    <div class="id">puco0002</div>
                                    <div class="name"><a href="javascript:;" class="link fc_blue">최학생</a></div>
                                    <div class="no">7</div>
                                    <div class="state"><span class="th"></span>2차시</div>
                                    <div class="test"><span class="th"></span>완료</div>
                                    <div class="test"><span class="th"></span>완료</div>
                                </li>
                                <li>
                                    <div class="id">puco0003</div>
                                    <div class="name"><a href="javascript:;" class="link fc_blue">김생학</a></div>
                                    <div class="no">9</div>
                                    <div class="state"><span class="th"></span>2차시</div>
                                    <div class="test"><span class="th"></span>진행중</div>
                                    <div class="test"><span class="th"></span>진행중</div>
                                </li>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
                <div class="btn_area"><a class="btn btn_lg btn_blue btn_pill_10" id="batchRegister" onclick="layerShow('popBatch')">일괄가입</a></div>
        </div>

    </div>
</div>
<th:block th:replace="fragments/footer"></th:block>
</body>
<script>

    let areaNm;
    let schlNm;
    let grade;
    let ban;
    let batchArr;
    let loginId;
    let pwd;

    $("#batch_confirm").on("click" , function (){

        areaNm   = $("#areaNm").val();
        schlNm   = $("#schlNm").val();
        grade    = $("#grade").val();
        ban      = $("#ban").val();
        batchArr = $("#batchArr").val();
        loginId  = $("#loginId").val();
        pwd      = $("#pwd").val();


        $.ajax({
            method : "POST" ,
            url : "/test/pages/myPage/batchManagement/batchRegister" ,
            data : {

                    'areaNm'   : areaNm,
                    'schlNm'   : schlNm,
                    'grade'    : grade,
                    'ban'      : ban,
                    'batchArr' : batchArr,
                    'loginId'  : loginId,
                    'pwd'      : pwd,

            },
            success(result) {
                if(result == 1) {
                    alert("전송성공");
                }else {
                    alert("전송실패");
                }
            }
        });
    });
</script>
</html>